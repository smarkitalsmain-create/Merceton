# Merceton – Final QA Testing Table

| Feature | Description | Test step | Result | Remarks | Suggestions |
|--------|-------------|-----------|--------|---------|-------------|
| Multiple Domain Routing | The landing is on merceton.com, SaaS on app.merceton.com, admin on admin.merceton.com | Check for the routing and all the results and all | Pass/Fail | Everything is going good | You should add support.merceton.com as well for support ticket |
| Landing host blocks dashboard | On landing host (e.g. merceton.com), /dashboard and /admin must not be reachable | (a) Use landing host or localhost without app./admin. subdomain. (b) Navigate to /dashboard or /admin. (c) User is redirected to / (landing). | Pass/Fail | | Add explicit 404 or “Wrong domain” message for clarity. |
| App host root redirect | On app host (e.g. app.merceton.com), root must send user to dashboard | (a) Use app. subdomain or configured app host. (b) Open /. (c) Redirect to /dashboard. | Pass/Fail | | Ensure env/config documents app host. |
| Admin host root redirect | On admin host (e.g. admin.merceton.com), root must send to admin panel | (a) Use admin. subdomain. (b) Open /. (c) Redirect to /admin. | Pass/Fail | | Same for admin host in config. |
| Sign-up with email | New user can create account with email and password | (a) No account for test@example.com. (b) Submit sign-up with email, password, confirm password. (c) Success message “Check your email”; no error. | Pass/Fail | | Add rate limit and captcha (recommended). |
| Sign-up password mismatch | Confirm password must match password | (a) On sign-up page. (b) Enter different strings in password and confirm password, submit. (c) Validation error; form not submitted. | Pass/Fail | | Show inline error under confirm field. |
| Sign-up email redirect | Confirmation link uses correct site URL for callback | (a) Set NEXT_PUBLIC_SITE_URL or NEXT_PUBLIC_APP_URL. (b) Complete sign-up, open email link. (c) Redirect to /auth/callback then app; no localhost in prod. | Pass/Fail | | Document getSiteUrl() in README. |
| Sign-in with valid credentials | Existing user can sign in with email and password | (a) User exists and is confirmed. (b) Enter email and password on /sign-in, submit. (c) Redirect to /dashboard; session established. | Pass/Fail | | Add “Remember me” option (recommended). |
| Sign-in invalid password | Wrong password is rejected | (a) Valid email. (b) Submit with wrong password. (c) Error message; no redirect; user stays on sign-in. | Pass/Fail | | Avoid disclosing “email not found” vs “wrong password”. |
| Sign-in loading state | Button shows loading during request | (a) On sign-in page. (b) Submit form. (c) Button shows “Signing in…” and is disabled until response. | Pass/Fail | | Disable form fields during submit. |
| Forgot password | User can request password reset email | (a) On /forgot-password. (b) Enter email, submit. (c) Success message; email sent (or generic message if no account). | Pass/Fail | | Use same message for existing/non-existing email (recommended). |
| Reset password with token | User can set new password from reset link | (a) Have valid reset link from email. (b) Open link, set new password, submit. (c) Redirect to sign-in; new password works. | Pass/Fail | | Expiry message if token expired. |
| Auth callback after email confirm | After clicking confirm link, user is signed in and redirected | (a) Unconfirmed user, valid confirm link. (b) Open link. (c) Session created; redirect to dashboard or intended URL. | Pass/Fail | | Log confirmation events for support. |
| Admin sign-in | Super admin can sign in at admin host | (a) User in SUPER_ADMIN_EMAILS. (b) On admin host go to /admin/sign-in, enter credentials. (c) Redirect to /admin. | Pass/Fail | | Add “Merchant sign in” link visibility. |
| Admin sign-in redirect param | redirect query is honored after admin login | (a) Not logged in. (b) Visit /admin/merchants?redirect=/admin/merchants, get redirected to sign-in, then sign in. (c) Land on /admin/merchants. | Pass/Fail | | Document redirect param. |
| Logout | User can sign out and is redirected | (a) Signed in on dashboard or admin. (b) Click logout/sign out. (c) Session cleared; redirect to sign-in or landing. | Pass/Fail | | Confirm logout on admin clears app session too. |
| Unauthenticated dashboard access | Visiting dashboard without session redirects to sign-in | (a) No session (incognito or cleared cookies). (b) Open app host /dashboard. (c) Redirect to /sign-in with next=/dashboard. | Pass/Fail | | Preserve next for post-login redirect. |
| Unauthenticated admin access | Visiting admin without session redirects to admin sign-in | (a) No session. (b) Open admin host /admin/merchants. (c) Redirect to /admin/sign-in. | Pass/Fail | | Same for all /admin/* except sign-in. |
| Onboarding gate no merchant | User with no merchant is sent to create store | (a) Signed in, no merchant linked. (b) Visit /dashboard. (c) Redirect to /onboarding/create-store. | Pass/Fail | | Clear CTA on create-store page. |
| Create store (onboarding start) | User can create first store and get a merchant | (a) On /onboarding/create-store. (b) Enter store name and slug, submit. (c) Merchant and link created; redirect to dashboard or next onboarding step. | Pass/Fail | | Validate slug format and uniqueness. |
| Onboarding PAN step | Merchant can complete PAN step | (a) Merchant exists, onboarding not complete. (b) Enter valid PAN, submit. (c) Step marked complete; progress updated. | Pass/Fail | | Validate PAN format; show help text. |
| Onboarding GST step | Merchant can complete GST status and optional GSTIN | (a) PAN done. (b) Select REGISTERED/NOT_REGISTERED, enter GSTIN if needed, submit. (c) Step saved; no error. | Pass/Fail | | GSTIN format validation (recommended). |
| Onboarding business basics | Store display name and primary category saved | (a) GST step done. (b) Enter display name and category, submit. (c) Data saved; completion % increases. | Pass/Fail | | Autosave or clear “unsaved” warning. |
| Onboarding bank details | Bank account details can be added | (a) On bank step. (b) Enter account holder, bank name, account number, IFSC, submit. (c) Record saved; validation errors if invalid. | Pass/Fail | | IFSC lookup or validation (recommended). |
| Onboarding redirect after refresh | Refreshing mid-onboarding keeps user in onboarding flow | (a) Complete one step, stay on onboarding. (b) Refresh page. (c) Same step or next step shown; no redirect to dashboard unless complete. | Pass/Fail | | Persist “current step” in DB or session. |
| Dashboard overview counts | Dashboard shows product count, order count, revenue | (a) Merchant with products and orders. (b) Open /dashboard. (c) Cards show correct counts and revenue (from paid payments). | Pass/Fail | | Cache 60s; add “as of” time (recommended). |
| Store setup page | Merchant can update store settings | (a) On /dashboard/settings/store. (b) Change store name or settings, save. (c) Success; data reflected on next load. | Pass/Fail | | Validate required fields. |
| Add product | Merchant can create a new product | (a) On /dashboard/products/new. (b) Fill name, price, optional SKU/stock, save. (c) Product created; appears in product list. | Pass/Fail | | Image upload and required fields. |
| Edit product | Merchant can update existing product | (a) Open a product from list. (b) Change name or price, save. (c) Changes persisted; list shows new values. | Pass/Fail | | Optimistic update or loading state. |
| Product list pagination or load | Product list loads without timeout | (a) Merchant with many products. (b) Open /dashboard/products. (c) List loads; no empty or infinite load. | Pass/Fail | | Add pagination if >50 products (recommended). |
| Orders list | Merchant sees their orders | (a) Merchant with orders. (b) Open /dashboard/orders. (c) Orders listed with status; tenant isolation (only own orders). | Pass/Fail | | Filters by status/date (recommended). |
| Order detail view | Single order shows items, amounts, customer, status | (a) Valid order ID for merchant. (b) Open /dashboard/orders/[id]. (c) Full order details; no 404. | Pass/Fail | | Show payment and ledger link if present. |
| Order stage update | Merchant can move order to next stage | (a) Order in NEW or CONFIRMED. (b) Use stage action (e.g. Confirm, Ship). (c) Stage and status updated; event logged. | Pass/Fail | | Confirm dialog for irreversible actions. |
| Storefront by slug | Public store loads at /s/[slug] | (a) Merchant with slug “mystore”, storefront published. (b) Open /s/mystore. (c) Storefront renders; products visible. | Pass/Fail | | 404 with clear message for invalid slug. |
| Product page on storefront | Customer can open product and see details | (a) Store has product. (b) Open /s/[slug]/p/[productId]. (c) Product name, price, description, add to cart visible. | Pass/Fail | | SEO meta and image alt. |
| Add to cart | Customer can add product to cart | (a) On product or storefront. (b) Set quantity, add to cart. (c) Cart count updates; cart persists (cookie/localStorage). | Pass/Fail | | Cart drawer or page (recommended). |
| Checkout flow start | Customer can proceed to checkout | (a) Cart has items. (b) Go to checkout. (c) Checkout page shows items and address/payment entry. | Pass/Fail | | Validate stock before payment. |
| Checkout address validation | Invalid or missing address is rejected | (a) On checkout. (b) Submit with empty or invalid address. (c) Validation errors; order not created. | Pass/Fail | | Inline field errors. |
| Create Razorpay order | Checkout creates Razorpay order for online payment | (a) Checkout with online payment. (b) Click pay. (c) Razorpay order ID returned; redirect or modal for payment. | Pass/Fail | | Handle Razorpay load failure. |
| Payment success callback | After successful payment, order is confirmed and payment recorded | (a) Razorpay payment completed. (b) User returns to success URL or webhook fires. (c) Order status and payment status updated; ledger considered. | Pass/Fail | | Idempotency for duplicate success (recommended). |
| Payment failure handling | Failed payment shows error and does not create paid order | (a) Simulate failure or cancel. (b) Return to failure URL or leave. (c) Order remains unpaid or in PENDING; user can retry. | Pass/Fail | | Clear “Payment failed” message. |
| Razorpay webhook signature | Webhook rejects requests with invalid signature | (a) Webhook endpoint. (b) POST with wrong or missing signature. (c) 401/400; no DB update. | Pass/Fail | | Log rejections for monitoring. |
| Razorpay webhook payment.captured | payment.captured updates order and payment and ledger | (a) Valid webhook payload for captured payment. (b) Send POST to webhook. (c) Payment PAID; order updated; ledger entry created if applicable. | Pass/Fail | | Idempotent by payment_id (recommended). |
| Webhook replay | Duplicate webhook with same id is handled idempotently | (a) Send same payment.captured twice. (b) Second request. (c) 200 OK; no duplicate payment or ledger rows. | Pass/Fail | | Store processed event IDs. |
| Platform fee on order | Order stores platform fee and net payable | (a) Order created with payment. (b) Check order row. (c) grossAmount, platformFee, netPayable set; fee matches config. | Pass/Fail | | Fee config per merchant/package. |
| GST on order/invoice | Tax is calculated and stored (CGST/SGST or IGST) | (a) Product/order with tax. (b) Complete order. (c) Order has tax breakdown; invoice shows GST. | Pass/Fail | | Align with GST rules by state. |
| Merchant invoice PDF download | Merchant can download order invoice PDF | (a) Order with invoice. (b) Open order detail, download invoice. (c) PDF returns with Content-Type application/pdf; correct order data. | Pass/Fail | | Filename with order number. |
| Billing statement CSV | Merchant can download billing statement CSV | (a) Merchant with ledger data. (b) Request statement CSV for date range. (c) CSV download; columns match parser (taxable, cgst, sgst, igst, total). | Pass/Fail | | Document column format. |
| Platform invoice PDF (admin) | Admin can download platform invoice PDF for merchant | (a) Admin, valid merchantId and date range. (b) GET /api/admin/billing/invoice.pdf?merchantId=&from=&to=. (c) PDF returned; 404 if no data. | Pass/Fail | | Link from merchant billing tab. |
| Ledger export (admin) | Admin can export merchant ledger as CSV | (a) Admin on merchant detail. (b) Download ledger. (c) CSV with entries; optional from/to filter. | Pass/Fail | | Add date range in UI. |
| Payout list (merchant) | Merchant sees payout history | (a) Merchant with payouts. (b) Open /dashboard/payouts. (c) Payout batches listed with status and amount. | Pass/Fail | | Show “Next payout” estimate (recommended). |
| Payout list (admin) | Admin sees all payouts or by merchant | (a) Admin. (b) Open admin payouts. (c) List loads; filters if present. | Pass/Fail | | Filter by merchant and status. |
| Refund initiation | Merchant or admin can initiate refund for order | (a) Order paid, refund not yet created. (b) Submit refund with amount and reason. (c) Refund record created; status PENDING or similar. | Pass/Fail | | Sync to Razorpay; ledger entry (recommended). |
| Refund ledger impact | Refund creates or updates ledger correctly | (a) Refund created. (b) Check ledger. (c) Refund type entry or reversal; amounts correct. | Pass/Fail | | Document refund ledger rules. |
| Admin merchant list | Admin sees all merchants | (a) Admin. (b) Open /admin/merchants. (c) List of merchants; no 403. | Pass/Fail | | Search and filters (recommended). |
| Admin merchant detail | Admin can open single merchant and see summary | (a) Admin. (b) Open /admin/merchants/[id]. (c) Merchant info, onboarding, status, tabs load. | Pass/Fail | | Show last login or activity (recommended). |
| Admin merchant onboarding data | Admin sees PAN, GST, business, bank, KYC state | (a) Merchant with partial onboarding. (b) Open merchant detail, onboarding tab. (c) All saved onboarding fields visible. | Pass/Fail | | Mask sensitive fields in UI. |
| Admin put merchant on hold | Admin can put merchant on hold with reason | (a) Admin, merchant ACTIVE. (b) Use “Put on hold”, select reason, add notes if required, submit. (c) Merchant accountStatus ON_HOLD; event and audit log; optional email. | Pass/Fail | | Require notes for “Other” reason. |
| Admin release hold | Admin can release hold | (a) Merchant ON_HOLD. (b) Use “Release hold”, optional notes, submit. (c) accountStatus ACTIVE; event and audit; optional email. | Pass/Fail | | Toast and refresh list. |
| Admin KYC approve | Admin can approve KYC for merchant | (a) Merchant KYC SUBMITTED. (b) Approve KYC with optional note. (c) kycStatus APPROVED; audit log; optional email. | Pass/Fail | | Reject flow with reason (recommended). |
| Hold blocks actions | When merchant is on hold, sensitive actions are blocked or warned | (a) Merchant ON_HOLD. (b) Try payout or critical action. (c) Action denied or banner shown; no unintended state change. | Pass/Fail | | Consistent hold check in API and UI. |
| Admin audit log | Admin actions are written to audit log | (a) Admin performs hold/release or KYC approve. (b) Open audit logs. (c) Entry with actor, action, entity, timestamp. | Pass/Fail | | Export and retention policy (recommended). |
| Admin billing profile | Admin can view and update platform billing profile | (a) Admin. (b) Open settings/billing, GET then POST with changes. (c) 200 with data; no 403 when profile missing (defaults returned). | Pass/Fail | | Validate GSTIN and required fields. |
| Feature gating (sidebar) | Dashboard sidebar hides gated features | (a) Merchant on Starter (no coupons). (b) Open dashboard. (c) Coupons or gated links hidden or disabled. | Pass/Fail | | Tooltip “Upgrade to enable”. |
| Feature API returns valid JSON | /api/admin/features or merchant features returns JSON | (a) Call features endpoint. (b) GET request. (c) Valid JSON; no empty body or HTML. | Pass/Fail | | Schema and docs for response. |
| Support tickets list (merchant) | Merchant sees their support tickets | (a) Merchant with tickets. (b) Open /dashboard/support. (c) List of tickets; create new link. | Pass/Fail | | Pagination and status filter. |
| Support ticket detail (admin) | Admin can open ticket and see thread | (a) Admin. (b) Open /admin/support/[id]. (c) Messages and metadata; reply if implemented. | Pass/Fail | | Assign and status (recommended). |
| Email signup confirmation | Sign-up sends confirmation email with link | (a) Sign up new email. (b) Check inbox. (c) Email with confirm link; link uses getSiteUrl(). | Pass/Fail | | Resend confirm option (recommended). |
| Email password reset | Forgot password sends reset email | (a) Request reset. (b) Check inbox. (c) Email with reset link; link uses getSiteUrl(). | Pass/Fail | | Rate limit and “no account” message. |
| Email on hold / hold released | Merchant receives email when put on hold and when released | (a) Admin puts merchant on hold then releases. (b) Check merchant admin email. (c) Two emails (on hold, released) or logged if email not configured. | Pass/Fail | | Do not fail API if email fails. |
| Email KYC approved | Merchant receives email when KYC is approved | (a) Admin approves KYC. (b) Check merchant email. (c) KYC approved email received or logged. | Pass/Fail | | Template with next steps. |
| Merchant cannot access admin | Merchant user hitting admin routes gets 403 or redirect | (a) Signed in as merchant (no super admin). (b) Open admin host /admin/merchants. (c) 403 or redirect to admin sign-in; no merchant data. | Pass/Fail | | Consistent 403 JSON for API. |
| Admin-only API returns 401 when not admin | Unauthenticated or non-admin call to admin API fails | (a) No cookie or non-admin user. (b) GET /api/admin/merchants. (c) 401 or 403; no list returned. | Pass/Fail | | Same for all /api/admin/*. |
| Tenant isolation API | Merchant A cannot read merchant B data via API | (a) Signed in as merchant A. (b) Call order or product API with merchant B’s IDs or context. (c) 403 or empty; no B data. | Pass/Fail | | Automated test for isolation. |
| Tenant isolation UI | Dashboard never shows another merchant’s data | (a) Merchant A. (b) Navigate orders, products, settings. (c) All data scoped to A; no cross-tenant leak. | Pass/Fail | | E2E test (recommended). |
| Duplicate order number | Two orders for same merchant cannot have same orderNumber | (a) Create order. (b) Attempt create with same merchantId and orderNumber (e.g. bug or replay). (c) Unique violation or validation error. | Pass/Fail | | Use DB unique index. |
| Health endpoint | /api/health returns ok and db latency | (a) Server running. (b) GET /api/health. (c) 200 JSON { ok: true, dbLatencyMs }; no empty body. | Pass/Fail | | Use in uptime checks. |
| Env-check production | /api/env-check returns 404 in production | (a) NODE_ENV=production. (b) GET /api/env-check. (c) 404. | Pass/Fail | | Do not expose in prod. |
| Empty state orders | Merchant with no orders sees clear empty state | (a) New merchant, no orders. (b) Open /dashboard/orders. (c) Message like “No orders yet”; no error. | Pass/Fail | | CTA to storefront or help. |
| Loading state dashboard | Dashboard shows loading until data is ready | (a) Open /dashboard. (b) Observe first paint. (c) Skeleton or spinner then cards; no flash of wrong data. | Pass/Fail | | Skeleton for cards (recommended). |
| Toast on error | Failed actions show toast or inline error | (a) Trigger failing action (e.g. invalid form). (b) Submit. (c) Toast or inline error; no silent fail. | Pass/Fail | | Consistent error format. |
| 503 page | DB down or severe error shows 503 page | (a) Simulate DB down or redirect to /503. (b) Open protected route. (c) 503 page or redirect to /503; no stack trace. | Pass/Fail | | Link to status or support. |
| Invoice not found | Request for non-existent invoice returns 404 JSON | (a) Admin or merchant. (b) Request invoice PDF for invalid ID or range with no data. (c) 404 with JSON error; no 500. | Pass/Fail | | Clear “No invoice for this range”. |
| Payment pending order | Order with payment PENDING shows correct state | (a) Order created, payment not yet captured. (b) View order. (c) Status “Pending” or similar; no “Paid”. | Pass/Fail | | Allow “Retry payment” (recommended). |
| Expired session on action | Expired session during form submit returns auth error | (a) Session expired (e.g. long idle). (b) Submit form (e.g. order stage). (c) 401/403; user prompted to sign in again. | Pass/Fail | | Refresh token or “Session expired” toast. |
| Custom domain verification | Merchant can add custom domain and see verification status | (a) On domain settings. (b) Add domain, follow DNS step. (c) Status updates to verified or pending; no crash. | Pass/Fail | | Document DNS records. |
| Pricing packages (admin) | Admin can list and edit pricing packages | (a) Admin. (b) Open pricing packages, edit one. (c) Changes save; packages visible to assignment. | Pass/Fail | | Prevent delete if in use (recommended). |
| Merchant pricing assignment | Admin can assign pricing package to merchant | (a) Admin on merchant detail. (b) Pricing tab, assign package. (c) Merchant fee config updated; features reflect package. | Pass/Fail | | Audit log for assignment. |
| Data migration sanity | After migration, app starts and critical queries run | (a) Run latest migration. (b) Start app, open dashboard and admin. (c) No P2021 or missing table; health passes. | Pass/Fail | | Smoke test in CI (recommended). |
